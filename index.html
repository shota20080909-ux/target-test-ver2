<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>語彙力テスト（教師用）</title>
<style>
body { font-family:sans-serif; text-align:center; background:#f5f5f5; margin:0; padding:20px; }
h1 { color:#333; }
textarea { width:80%; height:150px; margin:10px; }
input, button, select { padding:10px; margin:5px; font-size:1em; }
.unit-list { margin-top:20px; }
</style>
</head>
<body>

<h1>語彙力テスト（教師用）</h1>

<p>単語を <code>apple=りんご</code> の形式で1行ずつ入力してください<br>左が英語、右が日本語</p>

<textarea id="wordInput" placeholder="英語=日本語 を1行ずつ入力"></textarea><br>
<input type="text" id="unitName" placeholder="単元名を入力">
<button onclick="saveUnit()">単元を保存</button>

<div class="unit-list">
<h3>登録済みの単元</h3>
<select id="unitSelect"></select>
<button onclick="deleteUnit()">削除</button>
</div>

<script>
function loadUnits() {
    const units = JSON.parse(localStorage.getItem("units")||"{}");
    const select = document.getElementById("unitSelect");
    select.innerHTML="";
    Object.keys(units).forEach(u=>{
        const opt=document.createElement("option");
        opt.value=u;
        opt.textContent=u;
        select.appendChild(opt);
    });
}

function saveUnit(){
    const name = document.getElementById("unitName").value.trim();
    const data = document.getElementById("wordInput").value.trim().split("\n");
    if(!name || data.length===0){ alert("単元名と単語リストを入力してください"); return; }
    const obj = {};
    data.forEach(line=>{
        const [word, meaning] = line.split("=");
        if(word && meaning) obj[word.trim()] = meaning.trim();
    });
    const units = JSON.parse(localStorage.getItem("units")||"{}");
    units[name] = obj;
    localStorage.setItem("units", JSON.stringify(units));
    alert(`単元「${name}」を保存しました！`);
    document.getElementById("unitName").value="";
    document.getElementById("wordInput").value="";
    loadUnits();
}

function deleteUnit(){
    const select = document.getElementById("unitSelect");
    const name = select.value;
    if(!name) return alert("削除する単元を選んでください");
    if(!confirm(`「${name}」を削除しますか？`)) return;
    const units = JSON.parse(localStorage.getItem("units")||"{}");
    delete units[name];
    localStorage.setItem("units", JSON.stringify(units));
    loadUnits();
}

loadUnits();
</script>

</body>
</html>